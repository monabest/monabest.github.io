<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    Archive
  
</title>

<meta property="og:type" content="website">
<meta property="og:title" content="MonaBest-Blogggyyy">
<meta property="og:url" content="http://yoursite.com/archives/index.html">
<meta property="og:site_name" content="MonaBest-Blogggyyy">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MonaBest-Blogggyyy">


  <link rel="alternative" href="/atom.xml" title="MonaBest-Blogggyyy" type="application/atom+xml">



  <link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="/styles/main.css">






</head>
<body
  
    class="monochrome"
  
  >
  <div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="title" href="/">MonaBest-Blogggyyy</a>
</div>

  <div class="main-container">
    <div class="sidebar">
  <div class="header">
    <h1 class="title"><a href="/">MonaBest-Blogggyyy</a></h1>
    
    <div class="info">
      <div class="content">
        
        
          <div class="author">Mona Qiu</div>
        
      </div>
      
        <div class="avatar">
          
            <a href="monabest.git.io"><img src="http://scontent.cdninstagram.com/t51.2885-15/s480x480/e35/11351794_1500041536990504_88089302_n.jpg?ig_cache_key=MTExNzUzMjQyNDAxMDY4MDcyNg%3D%3D.2"></a>
          
        </div>
      
    </div>
  </div>
  <div class="body">
    
      
        <ul class="nav">
          
            
              <li class="category-list-container">
                <a href="javascript:;">Category</a>
                
              </li>
            
          
            
              <li class="tag-list-container">
                <a href="javascript:;">Tag</a>
                <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java-Programming/">Java Programming</a><span class="tag-list-count">3</span></li></ul>
              </li>
            
          
            
              <li class="archive-list-container">
                <a href="javascript:;">Archive</a>
                <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">3</span></li></ul>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="/" title="Homepage">Homepage</a>
              </li>
            
          
            
              <li>
                <a href="/archives" title="By Year">By Year</a>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="https://github.com/monabest" title="Github" target="_blank" rel="external">Github</a>
              </li>
            
          
        </ul>
      
    
  </div>
</div>

    <div class="main-content">
      
        <div style="max-width: 2300px">
      
          

  
  
    
      
      
      <section class="archives-wrap">
        <div class="archive-year-wrap">
          <h1><a href="/archives/2017" class="archive-year">2017</a></h1>
        </div>
        <div class="post-list">
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2017/02/05/Reading-Effective-Java/" >
  Reading -Effective Java
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2017/02/05/Reading-Effective-Java/"><span class="article-date">
  2017-02-05
</span>
</a>
        

        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-Programming/">Java Programming</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h1 id="Effective-Java"><a href="#Effective-Java" class="headerlink" title="Effective Java"></a>Effective Java</h1><h2 id="Chapter-1"><a href="#Chapter-1" class="headerlink" title="Chapter 1"></a>Chapter 1</h2><p>make effective use of  <code>java.util, java.util.concurrent, java.io</code><br>module refers to any reusable software component</p>
<blockquote>
<ul>
<li>Interfaces (including annota- tions), classes (including enums), array are reference types</li>
<li>Primitives are not objects</li>
<li>A method’s signature: 1. its name 2. the types of its formal parameters</li>
<li>Signature does not include the method’s return type.</li>
</ul>
</blockquote>
<p>This book uses  <code>package-private</code> instead of the term  <code>default</code> access.<br>The term <code>exported API</code>, or <code>API</code>, refers to the classes, interfaces, constructors, members, and serialized forms by which a programmer accesses a class, interface, or package.<br>API short for <em>application programming interface</em>.<br>A class whose implementation uses an API is a client of the API.<br>Classes, interfaces, constructors, members, and serialized forms are collec- tively known as API elements.</p>
<h2 id="Chapter-2"><a href="#Chapter-2" class="headerlink" title="Chapter 2"></a>Chapter 2</h2><h3 id="Creating-and-Destroying-Objects"><a href="#Creating-and-Destroying-Objects" class="headerlink" title="Creating and Destroying Objects"></a>Creating and Destroying Objects</h3><p>####<br>Item 1: consider static factory methods instead of constructors<br>A normal way for a class to provide an instance of itself is to provide a public constructor.<br>Another technique is that a class can provide a <code>public static factory method</code>, which is simply a static method that returns an instance of the class.<br>Advantages:</p>
<blockquote>
<ul>
<li>name easier to read: e.g.BigInteger(int, int, Random), returns a BigInteger that is probably prime, would have been better expressed as a static factory method named BigIn- teger.probablePrime.The Boolean.valueOf(boolean) method illus- trates this technique: it never creates an object. </li>
<li>In cases where a class seems to require multiple constructors with the same signature, replace the constructors with static factory methods and carefully chosen names to highlight their differences.</li>
<li>Static factory methods is unlike constructors. They are not required to create a new object each time they’re invoked. The Boolean.valueOf(boolean) method illustrates this technique: it never creates an object</li>
<li>unlike constructors, they can return an object of any subtype of their return type</li>
<li>static factory methods reduce the verbosity of creating parameterized type instances. e.g. Map<string, list<string="">&gt; m = HashMap.newInstance();</string,></li>
</ul>
</blockquote>
<p>Distanvages:</p>
<blockquote>
<ul>
<li>classes without public or protected constructors cannot be subclassed.</li>
<li>they are not readily distinguishable from other static methods. </li>
</ul>
</blockquote>
<p>Three essential components of a service provider framework:</p>
<ol>
<li>a service interface: provides implement</li>
<li>a provider registration API: systems uses to register implements.</li>
<li>service access API: clients use to obtain an instance of the service.</li>
<li>serice provider interface: provdes implement to create instances of their service implementation.<br>StackOverFlow example:<br>The static factory method pattern is a way to encapsulate object creation. Without a factory method, you would simply call the class’s constructor directly: <code>Foo x = new Foo()</code>. With this pattern, you would instead call the factory method: <code>Foo x = Foo.create()</code> The constructors are marked private, so they cannot be called except from inside the class, and the factory method is marked as static so that it can be called without first having an object.</li>
</ol>
<h4 id="Item-2-consider-a-builder-when-faced-with-many-constructor-parameters"><a href="#Item-2-consider-a-builder-when-faced-with-many-constructor-parameters" class="headerlink" title="Item 2: consider a builder when faced with many constructor parameters"></a>Item 2: consider a builder when faced with many constructor parameters</h4><p>static factories and constructor have limitation: do not handle well with large numbers of optional parameters.<br>Traditionally, use <code>telescoping constructor pattern</code>: You provide a constructor with only required params, another with a single optional param, a thrid with 2 optional params and so on. e.g<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//doesn't scale well, only part of the code.</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">NutritionFacts</span><span class="params">(<span class="keyword">int</span> servingSize, <span class="keyword">int</span> servings)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>(servingSize, servings, <span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">NutritionFacts</span><span class="params">(<span class="keyword">int</span> servingSize, <span class="keyword">int</span> servings,</span></span></div><div class="line">        <span class="keyword">int</span> calories) &#123;</div><div class="line">    <span class="keyword">this</span>(servingSize, servings, calories, <span class="number">0</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>A second alternative when you are faced with many constructor parameters is the <code>JavaBeans pattern</code>: call a parameterless constructor to create the object ad call setters. disadvantages: 1. may be in an inconsistent state partway through its construction. 2. precludes the possibility of making a class immutable<br>A third alternative: <code>Builder Pattern</code> combines the safety of the telescoping constructor pattern with the readability of the JavaBeans pattern.<br>Step:</p>
<blockquote>
<ul>
<li>client calls a constructor (or static factory) with all required parameters and gets a builder object.</li>
<li>client calls setter-like methods on the builder object to set each optional parameter of itereset.</li>
<li>client calls a parameterless build method to generate the immutable object.</li>
<li>builder is a static member class of the class it builds.</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Builder Pattern</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NutritionFacts</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> servingSize;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> servings;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> calories;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> fat;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> sodium;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> carbohydrate;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</div><div class="line">        <span class="comment">// Required parameters</span></div><div class="line">        <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> servingSize;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> servings;</div><div class="line">        <span class="comment">// Optional parameters </span></div><div class="line">        <span class="keyword">private</span> <span class="keyword">int</span> calories      = <span class="number">0</span>;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">int</span> fat           = <span class="number">0</span>;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">int</span> carbohydrate  = <span class="number">0</span>;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">int</span> sodium        = <span class="number">0</span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Builder</span><span class="params">(<span class="keyword">int</span> servingSize, <span class="keyword">int</span> servings)</span> </span>&#123;</div><div class="line">            <span class="keyword">this</span>.servingSize = servingSize;</div><div class="line">            <span class="keyword">this</span>.servings    = servings;</div><div class="line">    &#125;</div><div class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">calories</span><span class="params">(<span class="keyword">int</span> val)</span></span></div><div class="line">            &#123; calories = val;      <span class="keyword">return</span> <span class="keyword">this</span>; &#125;</div><div class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">fat</span><span class="params">(<span class="keyword">int</span> val)</span></span></div><div class="line">            &#123; fat = val;           <span class="keyword">return</span> <span class="keyword">this</span>; &#125;</div><div class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">carbohydrate</span><span class="params">(<span class="keyword">int</span> val)</span></span></div><div class="line">            &#123; carbohydrate = val;  <span class="keyword">return</span> <span class="keyword">this</span>; &#125;</div><div class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">sodium</span><span class="params">(<span class="keyword">int</span> val)</span></span></div><div class="line">            &#123; sodium = val;        <span class="keyword">return</span> <span class="keyword">this</span>; &#125;</div><div class="line">        <span class="function"><span class="keyword">public</span> NutritionFacts <span class="title">build</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> NutritionFacts(<span class="keyword">this</span>);</div><div class="line">        &#125; </div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">NutritionFacts</span><span class="params">(Builder builder)</span> </span>&#123;</div><div class="line">        servingSize  = builder.servingSize;</div><div class="line">        servings = buider.servings;</div><div class="line">        calories = builder.calories;</div><div class="line">        fat = builder.fat;</div><div class="line">        sodium = builder.sodium;</div><div class="line">        carbohydrate = builder.carbohydrate;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> NutritionFacts is immutable, and that all parameter default values are in a single location. The builder’s setter methods return the builder itself so that invocations can be chained. Here’s how the client code looks:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NutritionFacts cocaCola = <span class="keyword">new</span> NutritionFacts.Builder(<span class="number">240</span>, <span class="number">8</span>).calories(<span class="number">100</span>).sodium(<span class="number">35</span>).carbohydrate(<span class="number">27</span>).build();</div></pre></td></tr></table></figure></p>
<h4 id="Item3-Enforce-the-singleton-property-with-a-private-constructor-or-an-enum-type"><a href="#Item3-Enforce-the-singleton-property-with-a-private-constructor-or-an-enum-type" class="headerlink" title="Item3: Enforce the singleton property with a private constructor or an enum type"></a>Item3: Enforce the singleton property with a private constructor or an enum type</h4><p>singleton class implements:</p>
<ol>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Singleton with public final field</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Elvis</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Elvis INSTANCE = <span class="keyword">new</span> Elvis();</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Elvis</span><span class="params">()</span> </span>&#123; ... &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">leaveTheBuilding</span><span class="params">()</span> </span>&#123; ... &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>2.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Singleton with static factory</span></div><div class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Elvis</span> </span>&#123;</div><div class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Elvis INSTANCE = <span class="keyword">new</span> Elvis();          <span class="function"><span class="keyword">private</span> <span class="title">Elvis</span><span class="params">()</span> </span>&#123; ... &#125;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Elvis <span class="title">getInstance</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> INSTANCE; &#125;</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">leaveTheBuilding</span><span class="params">()</span> </span>&#123; ... &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<ol>
<li>best, provides the serializatin machinery for free.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Enum singleton - the preferred approach</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Elvis &#123;</div><div class="line">    INSTANCE;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">leaveTheBuilding</span><span class="params">()</span> </span>&#123; ... &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="Item4-Enforce-noninstantialibity-with-a-private-constructor"><a href="#Item4-Enforce-noninstantialibity-with-a-private-constructor" class="headerlink" title="Item4: Enforce noninstantialibity with a private constructor"></a>Item4: Enforce noninstantialibity with a private constructor</h4><p>A default construc- tor is generated only if a class contains no explicit constructors, so a class can be made noninstantiable by including a private constructor:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Noninstantiable utility class</span></div><div class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UtilityClass</span> </span>&#123;</div><div class="line">     <span class="comment">// Suppress default constructor for noninstantiability</span></div><div class="line">     <span class="function"><span class="keyword">private</span> <span class="title">UtilityClass</span><span class="params">()</span> </span>&#123;</div><div class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> AssertionError();</div><div class="line">  &#125;</div><div class="line">     ...  <span class="comment">// Remainder omitted</span></div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>It guarantees that the class will never be instantiated under any circumstances. This idiom also prevents the class from being subclassed. All constructors must invoke a superclass constructor, explicitly or implicitly, and a subclass would have no accessible superclass constructor to invoke.</p>
<h4 id="Item5-Avoid-creating-unnecessary-objects"><a href="#Item5-Avoid-creating-unnecessary-objects" class="headerlink" title="Item5: Avoid creating unnecessary objects"></a>Item5: Avoid creating unnecessary objects</h4><p>String s = new String(“stringette”); // DON’T DO THIS!<br>“stringette” is itself a string instance. If this use occurs in a loop or in a frequently invoked method, many string instances will be created needlessly.So just simply<br>String s = “stringette”;<br>This uses a single string instance rather than creating a new one each time.</p>
<h4 id="Item6"><a href="#Item6" class="headerlink" title="Item6:"></a>Item6:</h4><h2 id="Chapter-3"><a href="#Chapter-3" class="headerlink" title="Chapter 3"></a>Chapter 3</h2><h2 id="Chapter-4"><a href="#Chapter-4" class="headerlink" title="Chapter 4"></a>Chapter 4</h2>
        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2017/02/05/Java-Read-and-Write-files/" >
  Java Read and Write files
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2017/02/05/Java-Read-and-Write-files/"><span class="article-date">
  2017-02-05
</span>
</a>
        

        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-Programming/">Java Programming</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p>It’s pretty forgettable about the I/O in Java.<br>For now list some common ways for reminder. TODO: go over the book.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*reading a file by using stream I/O*/</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</div><div class="line">	String filePath = <span class="string">"..."</span>;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">	<span class="comment">/*read the input text file*/</span></div><div class="line">	File file = <span class="keyword">new</span> File(filePath);</div><div class="line">	<span class="comment">/*build a input stream reader*/</span></div><div class="line">	InputStreamReader reader = <span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(file));</div><div class="line">	BufferedReader br = <span class="keyword">new</span> BufferedReader(reader);</div><div class="line">	String line = <span class="string">""</span>;</div><div class="line">	line = br.readLine();</div><div class="line">	<span class="comment">/*read by line*/</span></div><div class="line">		<span class="keyword">while</span>(line != <span class="keyword">null</span>)&#123;</div><div class="line">			line = br.readLine();</div><div class="line">		&#125;</div><div class="line"></div><div class="line"></div><div class="line">		<span class="comment">/*write text file*/</span></div><div class="line">	File writename = <span class="keyword">new</span> File(<span class="string">".\\result\\en\\output.txt"</span>); <span class="comment">//build a file if not already exits</span></div><div class="line">        writename.createNewFile(); <span class="comment">// create new file </span></div><div class="line">        BufferedWriter out = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(writename));  </div><div class="line">         </div><div class="line">        out.write(<span class="string">"i AM WRITING OUT\r\n"</span>); <span class="comment">// \r\n </span></div><div class="line">        out.flush(); <span class="comment">// put the buffered content into the file</span></div><div class="line">        out.close(); <span class="comment">// close the file at the end</span></div><div class="line">  </div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;  </div><div class="line">            e.printStackTrace();  </div><div class="line">        &#125;  </div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Reference:<br><a href="http://blog.csdn.net/monkeyduck/article/details/11525771" target="_blank" rel="external">http://blog.csdn.net/monkeyduck/article/details/11525771</a><br><a href="http://www.cnblogs.com/0201zcr/p/5009975.html" target="_blank" rel="external">http://www.cnblogs.com/0201zcr/p/5009975.html</a><br><a href="http://blog.csdn.net/makeitperfect/article/details/9094613" target="_blank" rel="external">http://blog.csdn.net/makeitperfect/article/details/9094613</a></p>

        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2017/02/04/JSON-used-in-Java/" >
  JSON used in Java
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2017/02/04/JSON-used-in-Java/"><span class="article-date">
  2017-02-04
</span>
</a>
        

        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-Programming/">Java Programming</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p>download <a href="http://www.java2s.com/Code/Jar/j/Downloadjsonsimple111jar.htm" target="_blank" rel="external">jason-simple-1.1.1. jar</a><br>To deploy the Java library in Eclipse.<br>right click project - build path - add external archives - choose the jar to import.<br>JSON object is like java.util.Map<br>JSON array is like java.util.List</p>
<p>A JSON object is an unordered set of key/value pairs.<br>A JSON array is an ordered collection of values. The values could be objects or arrays.</p>
<p>Build an object form String, and retrieves by providing keys.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">String str = <span class="string">"&#123; \"name\": \"Alice\", \"age\": 20 &#125;"</span>;</div><div class="line">JSONObject obj = <span class="keyword">new</span> JSONObject(str);   <span class="comment">//save as new object</span></div><div class="line">String n = obj.getString(<span class="string">"name"</span>);</div><div class="line"><span class="keyword">int</span> a = obj.getInt(<span class="string">"age"</span>);</div><div class="line">System.out.println(n + <span class="string">" "</span> + a);  <span class="comment">// prints "Alice 20"</span></div></pre></td></tr></table></figure></p>
<p>Build an object from array, and retrieves its array value by using     JSONArray.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">String str = <span class="string">"&#123; \"number\": [3, 4, 5, 6] &#125;"</span>;</div><div class="line">JSONObject obj = <span class="keyword">new</span> JSONObject(str);</div><div class="line">JSONArray arr = obj.getJSONArray(<span class="string">"number"</span>);</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length(); i++)</div><div class="line">    System.out.println(arr.getInt(i));</div></pre></td></tr></table></figure></p>
<p>Input file organized like this.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"id"</span>: <span class="number">1</span>,</div><div class="line">  <span class="string">"firstname"</span>: <span class="string">"Katerina"</span>,</div><div class="line">  <span class="string">"languages"</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="string">"lang"</span>: <span class="string">"en"</span>,</div><div class="line">      <span class="string">"knowledge"</span>: <span class="string">"proficient"</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">      <span class="string">"lang"</span>: <span class="string">"fr"</span>,</div><div class="line">      <span class="string">"knowledge"</span>: <span class="string">"advanced"</span></div><div class="line">    &#125;</div><div class="line">  ],</div><div class="line">  <span class="string">"job"</span>: &#123;</div><div class="line">    <span class="string">"site"</span>: <span class="string">"www.javacodegeeks.com"</span>,</div><div class="line">    <span class="string">"name"</span>: <span class="string">"Java Code Geeks"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Decode String<br>Read file from the given file path, and then build JSONObject to get the value.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">public static void main(Strig args)&#123;</div><div class="line">	String filePath = "....";</div><div class="line">	try&#123;</div><div class="line">		FileReader reader = new FileReader(filePath); //read a file</div><div class="line"></div><div class="line">		JSONParser jsonparser = new JSONParser();</div><div class="line">		JSONObject obj = (JSONObject) jsonParser.parse(reader); //need to cast</div><div class="line">		String firstName = (String)jsonObject.get("firstName);</div><div class="line">		long id = (long)jsonObject.get("id");</div><div class="line">		//then could use loop to get each language JSONObject in array</div><div class="line">		JSONArray lang = (JSONArray)jsonObject.get("languages"); </div><div class="line">		Iterator i = lang.iterator;</div><div class="line">		while (i.hasNext()) &#123;</div><div class="line">                JSONObject innerObj = (JSONObject) i.next();</div><div class="line">                System.out.println("language "+ innerObj.get("lang") +</div><div class="line">                        " with level " + innerObj.get("knowledge"));</div><div class="line">            &#125;</div><div class="line">            // handle a structure into the json object</div><div class="line">            JSONObject structure = (JSONObject) jsonObject.get("job");</div><div class="line">            System.out.println("Into job structure, name: " + structure.get("name"));</div><div class="line">	&#125;</div><div class="line">	catch (FileNotFoundException ex) &#123;</div><div class="line">            ex.printStackTrace();</div><div class="line">        &#125; catch (IOException ex) &#123;</div><div class="line">            ex.printStackTrace();</div><div class="line">        &#125; catch (ParseException ex) &#123;</div><div class="line">            ex.printStackTrace();</div><div class="line">        &#125; catch (NullPointerException ex) &#123;</div><div class="line">            ex.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>Encode into String</p>
<pre><code class="Java"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span>
    </span>{
        JSONObject obj = <span class="keyword">new</span> JSONObject();

        obj.put(<span class="string">"name"</span>,<span class="string">"foo"</span>);
        obj.put(<span class="string">"num"</span>,<span class="keyword">new</span> Integer(<span class="number">100</span>));
        obj.put(<span class="string">"balance"</span>,<span class="keyword">new</span> Double(<span class="number">1000.21</span>));
        obj.put(<span class="string">"is_vip"</span>,<span class="keyword">new</span> Boolean(<span class="keyword">true</span>));

        StringWriter out = <span class="keyword">new</span> StringWriter();
        obj.writeJSONString(out);
        String jsonText = out.toString();
        System.out.print(jsonText);
    }
</code></pre>
<p>Will show as {“balance”: 1000.21, “num”:100, “is_vip”:true, “name”:”foo”}</p>
<p>Reference:<br><a href="http://theoryapp.com/parse-json-in-java/" target="_blank" rel="external">http://theoryapp.com/parse-json-in-java/</a><br><a href="https://examples.javacodegeeks.com/core-java/json/java-json-parser-example/" target="_blank" rel="external">https://examples.javacodegeeks.com/core-java/json/java-json-parser-example/</a><br><a href="http://wiki.jikexueyuan.com/project/json/with-java.html" target="_blank" rel="external">http://wiki.jikexueyuan.com/project/json/with-java.html</a></p>

        
      </div>
    </div>

  






          <div class="main-footer">
  
    © 2017 MonaBest-Blogggyyy - Powered by <a href="http://hexo.io" target="_blank">Hexo</a> - Theme <a href="https://github.com/denjones/hexo-theme-chan" target="_blank">Chan</a>
  
</div>

      
        </div>
      
    </div>
  </div>
  <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

  <link rel="stylesheet" href="/PhotoSwipe/photoswipe.css">
  <link rel="stylesheet" href="/PhotoSwipe/default-skin/default-skin.css">

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
  <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

      <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>

      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
      <div class="pswp__ui pswp__ui--hidden">

        <div class="pswp__top-bar">

          <!--  Controls are self-explanatory. Order can be changed. -->

          <div class="pswp__counter"></div>

          <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

          <button class="pswp__button pswp__button--share" title="Share"></button>

          <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

          <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

          <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
          <!-- element will get class pswp__preloader--active when preloader is running -->
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
          <div class="pswp__share-tooltip"></div>
        </div>

        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="/PhotoSwipe/photoswipe.js"></script>
  <script src="/PhotoSwipe/photoswipe-ui-default.js"></script>


<script src="/scripts/main.js"></script>

</body>
</html>
